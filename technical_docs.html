<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Documentación Técnica - TOKEN REPO</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Montserrat:wght@700;800&family=Source+Code+Pro:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary-color: #1A237E; --secondary-color: #5C6BC0; --accent-color: #F9A825; --dark-grey: #263238; --medium-grey: #546E7A; --light-grey: #ECEFF1; }
        body { font-family: 'Lato', sans-serif; margin: 0; padding: 0; background: #f9fafb; color: var(--medium-grey); line-height: 1.8; font-size: 16px; }
        .container { max-width: 900px; margin: 0 auto; padding: 2rem; background: white; }
        nav { background: white; padding: 1rem 2rem; box-shadow: 0 2px 10px rgba(0,0,0,0.1); display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 1000; }
        nav .logo { font-family: 'Montserrat'; font-weight: 800; color: var(--primary-color); text-decoration: none; font-size: 1.5rem; }
        nav a { color: var(--medium-grey); text-decoration: none; margin-left: 1.5rem; font-weight: 700; }
        h1, h2, h3 { font-family: 'Montserrat', sans-serif; color: var(--primary-color); }
        h1 { border-bottom: 3px solid var(--accent-color); padding-bottom: 1rem; }
        h2 { margin-top: 3rem; border-bottom: 1px solid var(--light-grey); padding-bottom: 0.5rem;}
        h3 { color: var(--secondary-color); font-size: 1.3rem; }
        code { font-family: 'Source Code Pro', monospace; background-color: var(--light-grey); padding: 2px 6px; border-radius: 4px; color: var(--dark-grey); }
        ul { list-style-position: inside; padding-left: 1rem; }
        footer { background-color: var(--dark-grey); color: #ECEFF1; text-align: center; padding: 3rem 2rem; margin-top: 4rem;}
        footer .logo { font-family: 'Montserrat'; font-weight: 800; color: var(--accent-color); text-decoration: none; font-size: 1.5rem; }
        footer p { margin: 1rem 0 0 0; font-size: 0.9rem; }
        footer .disclaimer { font-size: 0.8rem; opacity: 0.7; }
    </style>
</head>
<body>
    <nav>
        <a href="index.html" class="logo">TOKEN REPO</a>
        <div><a href="index.html">Volver a Inicio</a></div>
    </nav>
    <main class="container">
        <h1>Documentación Técnica</h1>
        <p>Versión 1.0</p>
        
        <h2>1. Arquitectura de Pallets</h2>
        <p>La blockchain de TOKEN REPO utiliza una arquitectura modular de pallets que interactúan entre sí, garantizando seguridad y mantenibilidad.</p>
        
        <h2>2. Descripción de Pallets</h2>

        <h3>a. <code>pallet-repo</code> (Bóveda de Tokens)</h3>
        <p><strong>Responsabilidad:</strong> Gestionar la propiedad y el suministro del token REPO.</p>
        <ul>
            <li><strong>Almacenamiento Clave:</strong> <code>TotalSupply</code> y <code>BalanceOf</code>.</li>
            <li><strong>Funciones Críticas:</strong> <code>transfer()</code> para usuarios, y <code>transfer_from_treasury()</code> para ser llamada por el pallet de Swap.</li>
        </ul>

        <h3>b. <code>pallet-kyc</code> (Gestor de Identidad)</h3>
        <p><strong>Responsabilidad:</strong> Mantener un registro de cuentas verificadas.</p>
        <ul>
            <li><strong>Almacenamiento Clave:</strong> <code>VerifiedAccounts</code>.</li>
            <li><strong>Funciones Críticas:</strong> <code>add_kyc()</code> y <code>remove_kyc()</code>, ambas restringidas a la <code>KycAuthority</code>.</li>
        </ul>

        <h3>c. <code>pallet-swap</code> (Motor de Inversión)</h3>
        <p><strong>Responsabilidad:</strong> Orquestar el intercambio de USDT (verificado off-chain) por tokens REPO.</p>
        <ul>
            <li><strong>Almacenamiento Clave:</strong> <code>ProcessedTxs</code> para prevenir el doble gasto.</li>
            <li><strong>Funciones Críticas:</strong> <code>confirm_usdt_swap()</code>, restringida a la <code>SwapAuthority</code>.</li>
        </ul>

        <h3>d. <code>pallet-distribution</code> (Contabilidad de Beneficios)</h3>
        <p><strong>Responsabilidad:</strong> Calcular las comisiones de gestión y rendimiento.</p>
        <ul>
            <li><strong>Funciones Críticas:</strong> <code>distribute_profits()</code>. Calcula las comisiones y pasa el resto al <code>pallet-dividend</code>.</li>
            <li><strong>Parámetros Clave:</strong> Cuentas de Beneficios y Gestión, y porcentajes de comisiones.</li>
        </ul>
        
        <h3>e. <code>pallet-dividend</code> (Distribuidor de Dividendos)</h3>
        <p><strong>Responsabilidad:</strong> Distribuir beneficios de forma proporcional a los tenedores de tokens.</p>
        <ul>
            <li><strong>Funciones Críticas:</strong> <code>pay_dividends()</code>. Itera sobre los tenedores, calcula su participación y les transfiere su dividendo.</li>
        </ul>

        <h2>3. Cuentas del Sistema</h2>
        <ul>
            <li><strong><code>Sudo/Root</code>:</strong> Superusuario con autoridad sobre los pallets.</li>
            <li><strong><code>TreasuryAccount</code>:</strong> Posee los tokens REPO al inicio.</li>
            <li><strong><code>ProfitsAccount</code>:</strong> Recibe las ganancias de las propiedades.</li>
            <li><strong><code>ManagementAccount</code>:</strong> Recibe las comisiones.</li>
        </ul>
    </main>
    <footer>
        <a href="index.html" class="logo">TOKEN REPO</a>
        <p>© 2025 TOKEN REPO. Todos los derechos reservados.</p>
        <p class="disclaimer">Aviso Legal: La inversión en activos digitales conlleva riesgos. Consulte a sus asesores financieros y legales.</p>
    </footer>
</body>
</html>